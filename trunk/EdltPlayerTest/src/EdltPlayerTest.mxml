<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="horizontal"
	xmlns:edlt="edlt.*"
	applicationComplete="appCompHandler()"
	currentState="intro"
	horizontalAlign="center"
	verticalAlign="middle"
	>
	<mx:Script>
		<![CDATA[
			import mx.collections.XMLListCollection;
			import mx.rpc.events.ResultEvent;
			[Bindable]
			private var introPath:String = "";
			private var menuXML:XML = null;
			// 用于为课程菜单提供数据的集合
			[Bindable]
			private var xmlDataCollection:XMLListCollection = new XMLListCollection();
			private function appCompHandler():void {
				httpSvr.send();
			}
			private function httpResultHandler(event:ResultEvent):void {
				menuXML = new XML(event.result);
				introPath = menuXML.Header.@data.toString();	// 取得片头路径
				
				// 取得课程列表数据
				xmlDataCollection.source = menuXML.module.lesson.part;
			}
			// 片头跳过处理
			private function introSkipHand():void {
				this.currentState = "menu";
			}
		]]>
	</mx:Script>
	<mx:HTTPService id="httpSvr" url="data/menu2.xml"
		resultFormat="xml"
		result="httpResultHandler(event)"
		/>
	<!-- 集合 -->

	<mx:states>
		<mx:State name="intro">
			<mx:AddChild position="lastChild">
				<!-- 片头动画 -->
				<edlt:Intro id="intro" height="100%" width="100%"
					introSkip="introSkipHand()" source="{introPath}"
					>
				</edlt:Intro>
			</mx:AddChild>
		</mx:State>
		<mx:State name="menu">
			<mx:AddChild>
				<!-- 课程菜单 -->
				<mx:List
					width="100%" height="100%"
					dataProvider="{xmlDataCollection}"
					itemRenderer="EdltMenuRenderer"
					>
				</mx:List>
			</mx:AddChild>
		</mx:State>
		<mx:State name="main">
			
		</mx:State>
	</mx:states>
</mx:Application>
